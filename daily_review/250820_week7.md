# ✅ 1. 리뷰
## 오늘 한 것
### 1. Batch consistency 유지하기
- ShortTermWeatherForecast에 Shadow Table 적용
- WeatherRisk에 Shadow Table 적용

### 2. 트러블 슈팅
- Batch Job을 여러개 돌리는데 DeadLock 발생
- 아직 원인 불명

## 작업 과정에서 배운 것
### 1. MySQL의 편리함
- 세연님이 Point라는 MySQL 지원 type을 사용해서 지리 위치 계산을 쉽게 해내셨다.
- 그 외에도 찾아볼수록 다양한 지원 기능이 있단걸 보면서 이런 걸 만든 사람들이 새삼 대단해보였다. 
- 세부 기능이나 원리를 좀 더 뜯어보고 싶었다. 

### 2. 모든 기술도입에는 합당한 이유를 대자.
- 오늘 댕글이랑 멘토링을 하는데, 내가 선정한 챌린지에 대해서 납득이 되실 때까지 집요하게 질문하셨다. 
- 난 나름 합리적인 이유를 가지고 있다고 생각했는데, 대답을 조리있게 설명하기가 생각보다 어려웠다. 
- 무언가를 결정할 때 합리적인가를 판단하려면 '내가 댕글님을 설득할 수 있는 정도인가?'를 따져보는게 좋은 기준이 될 것 같다. 

## 어려웠던 점
### 1. 프레임워크 및 툴 동작 원리 이해하기
- 프레임워크나 툴들의 장점이나 단점은 추상화라고 생각한다. 
- 복잡한 내부 로직을 숨겨서 사용자가 쉽게 쓸 수 있지만 깊게 파고들려면 내부 원리를 뜯어봐야 한다. 
- 문서나 로그를 잘 제공하지만 편하게만 사용하던 내가 깊게 파고드는 것은 쉽지 않다. 
- Spring batch에서 MySQL의 특정 table에 insert할 때 DeadLock이 발생했다. 
- 아직 원인을 못찾았지만 내부 동작을 좀 뜯어 봐야 할 것 같다. 

# 🤔 2. 회고 (KPT)
## Keep (잘한점)
### 1. 댕글을 나름 잘(?) 설득
- 댕글에게 챌린지 포인트를 설명하는데 나름 잘한 것 같다는 생각이 들었다. 착각인가?

## Problem (개선할 점)
### 1. 프레임워크나 툴 동작 이해 부족
- 병렬적으로 자연스레 실행될 줄 알았던 Batch Job이 순차 실행되었다. --> 스레드 풀 도입으로 해결
- Spring Batch와 MySQL에서 DeadLock이 발생했는데 바로 알아차리지 못함.

## Try (해결책)
- 예상하지 못한 에러가 발생했다고 조급해하지 말자. 모든 기술을 다 아는 사람은 없다. 이런 상황을 마주했을 때 어떻게 잘 해결하는지가
더 중요한 포인트인 것 같다. 일단 deadlock 발생한거 잘 해결해보자. 

## 자체 평가
어제까지만 해도 챌린지 고민하는거 어렵다고 했던 것 같은데 해결해나가는게 눈에 보이니까 즐겁다. 
단순 기능 개발할 때와는 달리 내가 고민하고 성장하는게 느껴지는 것 같아 재미지다. 

내일도 Batch에서의 consistency를 더 높여보고자 노력해보려고 한다. 

# 📚 3. 학습 내용

# 💁‍ Todo list
- [ ] 데이터 consistency 유지
  - [x] ShortTermWeatherForecast에 Shadow Table 적용
  - [x] WeatherRisk에 Shadow Table 적용
  - [ ] DashboardTodayWeather의 동시 접근 문제 해결